<ion-content [fullscreen]="true" class="ion-padding">
  <div class="forgot-container" *ngIf="!submitted">
    <div class="forgot-box">
      <a class="back-link" routerLink="/login">
        Volver
      </a>

      <h1>Recuperar contraseña</h1>
      <p class="description">
        Ingresa tu email y te enviaremos las instrucciones para restablecer tu contraseña.
      </p>

      <form [formGroup]="forgotPasswordForm" (ngSubmit)="submit()">
        <div class="form-group">
          <ion-label>Email</ion-label>
          <div class="input-container">

            <ion-input type="email" placeholder="correo@ejemplo.com" formControlName="email"
              class="custom-input"></ion-input>
          </div>
          <div *ngIf="error" class="error-message">
            {{ error }}
          </div>
        </div>

        <ion-button expand="block" type="submit" [disabled]="!forgotPasswordForm.valid || loading"
          class="submit-button">
          {{ loading ? 'Enviando...' : 'Enviar instrucciones' }}
        </ion-button>
      </form>
    </div>
  </div>

  <!-- Success State -->
  <div class="forgot-container" *ngIf="submitted">
    <div class="forgot-box success-box">

      <h2>Email enviado</h2>
      <p class="description">
        Hemos enviado las instrucciones para restablecer tu contraseña a:
      </p>
      <p class="email-sent">{{ forgotPasswordForm.get('email')?.value }}</p>

      <div class="retry-section">
        <p>No recibiste el email?</p>
        <ion-button fill="clear" (click)="submitted = false">
          Intentar nuevamente
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>